<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>jsPDF Example</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.0/jspdf.umd.min.js"></script>
</head>
<body>
  <button id="create-pdf">Create PDF</button>
  <script>
    function getQueryParam(param) {
      const urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(param);
    }
    
    const infoText = decodeURIComponent(getQueryParam('infoText'));
    const data = JSON.parse(infoText);

    document.getElementById("create-pdf").addEventListener("click", function () {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();
      doc.setFontSize(12);
      
      // Use the data object to add the desired text to the PDF
      let lineHeight = 10;
      
      function addText(text) {
        doc.text(text, 10, lineHeight);
        lineHeight += 10;
      }

      addText(`Patient Name: ${data.patientName}`);
      addText(`Phone Number: ${data.phoneNumber}`);
      addText(`Gender: ${data.gender}`);
      addText(`Date of Birth: ${data.dateOfBirth}`);
      addText(`Age: ${data.age}`);
      addText(`Past History of Illness: ${data.pastHistoryOfIllness}`);
      addText(`Family History: ${data.familyHistory}`);
      addText(`Medications Allopathy: ${data.medicationsAllopathy}`);
      addText(`Allergies Medicine Food: ${data.allergiesMedicineFood}`);
      addText(`Visit Date: ${data.visitDate}`);
      addText(`Present Complaints: ${data.presentComplaints}`);
      addText(`Jivha Tongue: ${data.jivhaTongue}`);
      addText(`Stools: ${data.stools}`);
      addText(`Urine: ${data.urine}`);
      addText(`Sweat: ${data.sweat}`);
      addText(`Apetite: ${data.apetite}`);
      addText(`Nadi: ${data.nadi}`);
      addText(`City: ${data.city}`);
      addText(`Sleep: ${data.sleep}`);
      addText(`Diet Restrictions Recommendations: ${data.dietRestrictionsRecommendations}`);
      addText(`Next Visit: ${data.nextVisit}`);
      addText(`Pending Visit Amount: ${data.pendingVisitAmount}`);
      addText(`Total Cost of Medicines: ${data.totalCostOfMedicines}`);
      addText(`Pending Medicine Amount: ${data.pendingMedicineAmount}`);
      addText(`Any Other Remarks: ${data.anyOtherRemarks}`);
      addText(`Patient ID: ${data.patientId}`);

      for (let i = 1; i <= 15; i++) {
        if (data[`medicine${i}`]) {
          addText(`Medicine ${i}: ${data[`medicine${i}`]}`);
          addText(`Display Name ${i}: ${data[`displayName${i}`]}`);
          addText(`Dosage ${i}: ${data[`dosage${i}`]}`);
          addText(`Frequency ${i}: ${data[`frequency${i}`]}`);
          addText(`Selected Timings ${i}: ${data[`selectedTimings${i}`]}`);
          addText(`Meal ${i}: ${data[`meal${i}`]}`);
          addText(`Duration ${i}: ${data[`duration${i}`]}`);
          addText(`Notes ${i}: ${data[`notes${i}`]}`);
        }
      }

      doc.save("myDocument.pdf");
    });
  </script>
</body>
</html>
